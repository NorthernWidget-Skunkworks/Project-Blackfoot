* C:\Users\You\Documents\Project-Margay\Hardware\Simulation\USB_Batt_Switch.asc
V2 N004 0 PULSE(12 0 1e-3 1e-9 1e-9 2e-3 4e-3 2)
M1 Vin VComp VBat VBat FDC638P
M2 N003 VCompInv VUSB VUSB FDC638P
D1 VUSB Vbase PMEG2005AEA
D2 VBat Vbase PMEG2005AEA
R3 Vin 0 1k
XU1 VUSB VBat Vbase 0 VComp 0 N006 N006 LTC1440
R1 VBat 0 10k
V3 N005 0 4.5
V4 N001 0 PULSE(12 0 1.5e-3 1e-9 1e-9 4e-3 8e-3 2)
R2 VUSB 0 10k
V5 N002 0 3.5
A1 VComp 0 0 0 0 VCompInv 0 0 BUF Vhigh=5
V1 Vbase 0 5.5
C1 N005 0 0.1µF
C2 N002 0 0.1µF
C3 Vbase 0 0.1µF
C6 VBat 0 0.1µF
C7 VUSB 0 0.1µF
M3 VBat N004 N005 N005 FDC638P
M4 VUSB N001 N002 N002 FDC638P
D3 N003 Vin 1N4148
.model D D
.lib C:\Users\You\Documents\LTspiceXVII\lib\cmp\standard.dio
.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\You\Documents\LTspiceXVII\lib\cmp\standard.mos
.tran 0 20e-3 0 1e-7
.model PowSw SW(Ron = 0.1 Roff = 10Meg Vt = 2 Vh = -1)
.lib LTC.lib
.backanno
.end
